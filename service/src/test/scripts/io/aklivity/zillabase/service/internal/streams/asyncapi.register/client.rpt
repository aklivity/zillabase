#
# Copyright 2024 Aklivity Inc
#
# Licensed under the Aklivity Community License (the "License"); you may not use
# this file except in compliance with the License.  You may obtain a copy of the
# License at
#
#   https://www.aklivity.io/aklivity-community-license/
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OF ANY KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations under the License.
#

connect "http://localhost:7184/v1/asyncapis"
connected

write http:method "POST"
write http:version "HTTP/1.1"
write http:header "content-type" "application/vnd.aai.asyncapi+yaml"
write http:content-length

write 'asyncapi: 3.0.0\n'
     'info:\n'
     '  title: Zilla MQTT Proxy\n'
     '  version: 1.0.0\n'
     '  license:\n'
     '    name: Aklivity Community License\n'
     'servers:\n'
     '  plain:\n'
     '    host: mqtt://localhost:7183\n'
     '    protocol: mqtt\n'
     'defaultContentType: application/json\n'

write close

read http:status "200" "OK"
read http:header "content-type" "application/json"

read '{'
          '"groupId": "zilla",'
          '"id": "Procurement-Invoice",'
          '"name": "Artifact Name",'
          '"description": "Description of the artifact",'
          '"type": "ASYNCAPI",'
          '"version": 18,'
          '"createdBy": "user1",'
          '"createdOn": "2019-03-22T12:51:19Z",'
          '"modifiedBy": "user2",'
          '"modifiedOn": "2019-07-19T15:09:00Z",'
          '"globalId": 12984719247,'
          '"contentId": 82736'
      '}'

read closed
